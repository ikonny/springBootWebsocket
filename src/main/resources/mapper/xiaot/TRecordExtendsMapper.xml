<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="cn.hkfdt.webserver.im.xiaot.mapper.TRecordExtendsMapper" >
    <resultMap id="BaseResultMap" type="cn.hkfdt.webserver.im.xiaot.model.TRecord" >
        <id column="recordId" property="recordId" jdbcType="INTEGER" />
        <result column="symbol" property="symbol" jdbcType="VARCHAR" />
        <result column="fdtId" property="fdtId" jdbcType="VARCHAR" />
        <result column="tradeTime" property="tradeTime" jdbcType="VARCHAR" />
        <result column="returnRate" property="returnRate" jdbcType="REAL" />
        <result column="volatility" property="volatility" jdbcType="REAL" />
        <result column="type" property="type" jdbcType="INTEGER" />
        <result column="createTime" property="createTime" jdbcType="BIGINT" />
        <result column="score" property="score" jdbcType="DOUBLE" />
        <result column="questionKey" property="questionKey" jdbcType="VARCHAR" />
        <result column="version" property="version" jdbcType="INTEGER" />
    </resultMap>
    <resultMap id="ResultMapWithBLOBs" type="cn.hkfdt.webserver.im.xiaot.model.TRecord" extends="BaseResultMap" >
        <result column="actions" property="actions" jdbcType="LONGVARCHAR" />
    </resultMap>
    <sql id="Base_Column_List" >
    recordId, symbol, fdtId, tradeTime, returnRate, volatility, type, createTime, score,
    questionKey, version
  </sql>
    <sql id="Blob_Column_List" >
    actions
  </sql>
  
   <select id="getXiaotRecord" resultMap="ResultMapWithBLOBs" parameterType="java.util.Map" >
    select 
    <include refid="Base_Column_List" />
    ,
    <include refid="Blob_Column_List" />
    from xiaot_record
    where fdtId = #{fdtId,jdbcType=VARCHAR} and type = #{market,jdbcType=INTEGER}
      ORDER BY createTime DESC LIMIT #{offset,jdbcType=INTEGER},#{count,jdbcType=INTEGER}
  </select>
  
  <select id="getXiaotRecordTotal" resultType="java.lang.Integer" parameterType="java.util.Map" >
    select COUNT(1) FROM xiaot_record WHERE type = #{market,jdbcType=INTEGER} AND fdtId = #{fdtId,jdbcType=VARCHAR}
  </select>
 
</mapper>